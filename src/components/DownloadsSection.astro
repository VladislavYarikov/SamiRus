---
import { Image } from "astro:assets";

import appStoreBadge from "@/assets/landing/badges/appstore.png";
import googlePlayBadge from "@/assets/landing/badges/googleplay.png";
import rustoreBadge from "@/assets/landing/badges/rustore.png";
import { cn } from "@/lib";

interface Props {
  className?: string;
  badgesClassName?: string;
  pageType?: string;
}

const { className, badgesClassName, pageType } = Astro.props;
---

<script type="text/partytown" define:vars={{pageType}}>
  document.querySelector(`.${pageType}PlayMarket`).addEventListener('click', function() {
    window.trackGoal(`ANY_BUTTON_LISTENER`);
    window.trackGoal(`${pageType}PlayMarket_listener`);
  });
  document.querySelector(`.${pageType}AppStore`).addEventListener('click', function() {
    window.trackGoal(`ANY_BUTTON_LISTENER`);
    window.trackGoal(`${pageType}AppStore_listener`);
  });
  document.querySelector(`.${pageType}Rustore`).addEventListener('click', function() {
    window.trackGoal(`ANY_BUTTON_LISTENER`);
    window.trackGoal(`${pageType}Rustore_listener`);
  });
</script>

<section class={cn("", className)} id="downloads">
  <div class="px-4 text-center">
    <h2 class="text-4xl font-bold laptop:text-6xl">
      Скачивайте приложение Сами в
      <br />
      Google Play, Appstore и Rustore
    </h2>
  </div>

  <div
    class={cn(
      "flex flex-wrap items-center justify-center gap-4 rounded-[36px] bg-linear-accent py-20",
      badgesClassName
    )}
  >
    <div class=`badge ${pageType}PlayMarket`>
      <a
        href="https://play.google.com/store/apps/details?id=ru.sami.app"
        aria-label="Google Play"
      >
        <Image
          src={googlePlayBadge}
          alt="Google Play"
          loading="lazy"
          decoding="async"
        />
      </a>
    </div>
    <div class=`badge ${pageType}AppStore`>
      <a
        href="https://apps.apple.com/ru/app/%D1%81%D0%B0%D0%BC%D0%B8/id1549192749"
        aria-label="AppStore"
        target="_blank"
      >
        <Image
          src={appStoreBadge}
          alt="AppStore"
          loading="lazy"
          decoding="async"
        />
      </a>
    </div>
    <div class=`badge ${pageType}Rustore`>
      <a
        href="https://trk.mail.ru/c/me10h4?bundle_id=ru.sami.app"
        aria-label="Rustore"
      >
        <Image
          src={rustoreBadge}
          alt="Rustore"
          loading="lazy"
          decoding="async"
        />
      </a>
    </div>
  </div>
</section>

<style lang="postcss">
	.badge {
		@apply shrink-0;
		width: 100%;
		max-width: 230px;

		a {
			@apply size-full;
		}
	}
</style>
